{% extends "base.html" %}


{% load staticfiles %}


{% block title %}Список студентов{% endblock title %}


{% block nav_class_student_list_view %}active{% endblock %}


{% block content %}
  <div class="container-fluid">
    <div class="page-header">
      <h3>Список студентов</h3>
    </div>

      {% if messages %}
        <div class="container-fluid">
          <ul class="messages">
            {% for message in messages %}
               <li {% if message.tags %} class="{{ message.tags }}" {% endif %} >{{ message }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}

    <a href="{% url 'students:add' %}">
        <p>
          <button type="button" class="btn btn-large btn-primary">Добавить нового студента</button>
        </p>
    </a>
    <div id="spisok">
        <table class="table">
          <thead>
            <tr>
              <th class="students_detail">#</th>
              <th>Фамилия Имя</th>
              <th>Адрес</th>
              <th>Skype</th>
              <th>Курсы</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {%for st in student_list %}
                <tr>
                    <td class="students_detail">{{forloop.counter}}</td>
                    <td><a href="{% url 'students:detail' st.id %}">{{st.surname}}{{' '}}{{st.name}}</a></td>
                    <td>{{st.address}}</td>
                    <td>{{st.skype}}</td>
                    <td>
                      {% for cour in st.courses.all %}
                        <p><a href="{% url 'courses:detail' cour.id %}">{{cour.name}}</a></p>
                      {% endfor %}
                    </td>
                    <td><a href="{% url 'students:edit' st.id%}">
                            <button type="button" class="btn btn-large btn-primary">Изменить</button>
                        </a>
                    </td>
                    <td><a href="{% url 'students:remove' st.id%}">
                            <button type="button" class="btn btn-large btn-primary">Удалить</button>
                        </a>
                    </td>
                </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
  </div>

  <div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?{{ id_course }}page={{ page_obj.previous_page_number }}"><< previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?{{ id_course }}page={{ page_obj.next_page_number }}">next >></a>
        {% endif %}
    </span>
  </div>
{% endblock content %}
