{% extends 'base.html' %}


{% load staticfiles %}


{% block title %}Students{% endblock title %}


{% block nav_class_students %}active{% endblock %}


{% block content %}

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-success" role="alert">{{ message }}</div>
  {% endfor %}
{% endif %}

<a href="{% url 'students:add' %}"><button type="button" class="btn btn-default navbar-btn">Добавить студента</button></a>
      <h2>Список студентов</h2>
      <table class="table">
      <thead>
        <tr>
          <th>#</th>
          <th>Фамилия, имя</th>
          <th>Адрес</th>
          <th>skype</th>
          <th>Курсы</th>
        </tr>
        </tr>
      </thead>
      <tbody>
          {% for student in object_list %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{% url 'students:detail' pk=student.id %}">{{ student.name }} {{ student.surname }}</a></td>
            <td>{{ student.address }}</td>
            <td>{{ student.skype }}</td>

            <td>
              {% for course in student.courses.all %}
                <p><a href="{% url 'courses:detail' pk=course.id %}">{{ course }}</a></p>
              {% endfor %}
            </td>
            <td><a href="{% url 'students:edit' pk=student.pk %}"<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></td>
            <td><a href="{% url 'students:remove' pk=student.pk %}"<span class="glyphicon glyphicon-trash"></span></td>
          </tr> 
          {% endfor %}
      </tbody>
    </table>


{% endfor %}
<nav style="position: absolute; bottom: 20px">
<ul class="pagination">
        
        {% if page_obj.has_previous %}
          <li><a href="?page={{ page_obj.previous_page_number }}">previous</a></li>
        {% endif %}

        {% for page in paginator.page_range %}
        <li {% ifequal page_obj.number page %}
            class="active" 
            {% endifequal %}
        ><a href="{% url 'students:list_view' %}?page={{ page }}">{{ page }}<span class="sr-only">(current)</span></a></li>
        {% endfor %}


        {% if page_obj.has_next %}
            <li><a href="?page={{ page_obj.next_page_number }}">next</a></li>
        {% endif %}
</ul>
</nav>
</div>

    </div>
  </div>
{% endblock content %}