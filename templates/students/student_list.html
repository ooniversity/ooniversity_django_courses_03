{% extends "base.html" %}


{% block title %}Students list{% endblock title %}


{% block list_view_active %}class="active"{% endblock list_view_active %}


{% block content %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
    <p> <a href="{% url 'students:add' %}">Добавить нового студента</a></p>
    <h1 class="dl">Список Students PyBursa</h2>
	 <p>Список студентов по состоянию на 15.11.2015</p>

           <h2 class="header">Courses</h2>
      <table class="border">
        <tbody>
        <tr class="column_name">
           <td class="first_column">
            #
          </td>
          <td class="number_cell3">
            Фамилия Имя
          </td>
             <td class="number_cell3">
            Адрес
          </td>
          <td class="number_cell3">
            Skype
          </td>
           <td class="number_cell3">
            Курсы
          </td>
          </tr>
        {% for student in students %}
        <tr>
            <td class="number_cell1">
              {{ student.id }}
          </td>
          <td class="number_cell3">
              <a href="{% url 'students:detail' student.id %}">{{ student.surname }} {{ student.name }}</a>
          </td>
           <td class="number_cell3">
              {{ student.address }}
          </td>
          <td class="number_cell3">
              {{ student.skype }}
          </td>
          <td class="number_cell3">
            <ul>
            {% for course in student.courses.all %}
            <li>
              <a href="{% url 'courses:detail' course.id %}">{{ course.name }}</a>
            </li>

            {% endfor %}
            <td class="number_cell3">
                 <a href="{% url 'students:edit' student.id %}">Изменить</a>
             </td>
             <td class="number_cell3">
                 <a href="{% url 'students:remove' student.id %}">Удалить</a>
             </td>
              </ul>
          </td>
        </tr>
        {% endfor %}
        </tbody>
        </table>


        <div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}"><< previous</a>
        {% endif %}

        <span class="current">
          {% for num_page in paginator.page_range %}

            {% if num_page == page_obj.number %}
              <a href="" class="active-page">{{ num_page }}</a>
            {% else %}
              <a href="?page={{ num_page }}">{{ num_page }}</a>
            {% endif %}
          {% endfor %}
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next >></a>
        {% endif %}
    </span>
</div>

{% endblock content %}